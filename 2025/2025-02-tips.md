## 一些AI生图小tips

- 生图时，去噪过程重复的步骤数被称为采样迭代步数。
- 测试新的模型或Prompts效果时，迭代步数推荐使用10~15，可以快速获得结果，方便进行调整。
- 当迭代步数太低时，生成的图像几乎无法呈现内容。20 ~ 30之间的迭代步数通常会有不错的效果。
- 40步以上的迭代步数会需要更长的生图时间，但收益可能有限，除非是绘制动物毛发或皮肤纹理等。
- CFG用于控制图像增强的程度，一般建议在3-11，视大模型而定。
- 提示词的顺序很重要，越靠前的权重越高。
- 正向提示通常是按照结构编辑的，包括主体、动作、环境、光影、艺术风格等。
- 善用负向提示词可以避免生成一些不符合预期的图像特征，flux不响应负向提示词。
- 随机种子会影响生图时的初始噪声图像，因此当Seed=-1时，表示每次出图都会随机一个种子，使得每次生成的图都会不同。
- 如果我们想要固定某个形象，可以尝试把图片的随机种子值填在Seed里，这样每次出图的效果大致都会一样。
- 高清修复通常会花费较长的时间，建议控制图片数量。
- R-ESRGAN 4x+算法在写实图像的高分辨率修复中有着不错的表现。
- R-ESRGAN 4x+ Anime6B算法在二次元图像的高分辨率修复中比较推荐。
- 8x-NMKD-Superscale由于训练集中吸取了很多真实摄影素材，因此对于写实摄影，尤其是胶片风的质感提升会比较明显。
- Decompress放大算法可以比较好的提升材质类的出图质感。
- 低重绘幅度意味着修正原图，重绘幅度越高会和放大前的图像差别越大。
- 高分辨率修复的重绘幅度为0时不会改变原图，0.3 以下会基于原图稍微修正，超过 0.7 会对原图做出较大改变，1 会得到一个完全不同的图像。
- 一般情况下，重绘幅度推荐使用0.4到0.7，效果都会很不错。
- **面部修复和高分辨率修复都可以在一定程度上修复人像，但建议不要两个都开，不然可能适得其反。**
- ADetailer中的mediapipe系列适用于真实图片，但不适用于2D以及像素较小的脸部识别。
- ADetailer中的yolo系列适用于2D及真实图片，甚至背景中的低像素和不完整脸部也能检出。
- ADetailer可用于分别修正人物的面部、手部、全身、服饰缺陷。
- ADetailer本质上是自动进行目标检测的局部重绘。
- 使用ControlNet生图的时候，参考图的宽高比尽量和出图的设置相近。
- 如果想要控制人物的姿势和表情，可以使用ControlNet中的OpenPose。
- ControlNet的Canny系列可以详细的识别出参考图像中的各边缘轮廓，因此建议突出主体，避免出现过多干扰物。
- ControlNet的Depth系列可以通过景深关系识别图像内物体的空间位置，依据图片主体生成不同背景的图片。
- ControlNet的MLSD更适用于生成室内布局或建筑结构。
- 可以将自己的涂鸦传入，通过ControlNet的Scribble模型得到与涂鸦轮廓相同的图像。
- SoftEdge相较于Canny会更好的保留边缘轮廓，但线条细节会弱于Lineart。
- `ControlNet的Shuffle模型可以将一张图片的画风转移到另一张图片上。`
- Lineart Anime会把参考图生成为动漫线稿，但相比Lineart_anime_denoise会保留更多参考图的细节。
- Lineart Standard下的线条会有点粗，但可以保留参考图的部分光影关系，还会附带背景的线条。
- Lineart Anime Denoise会把参考图生成为动漫线稿，但会缺失大部分细节，给AI更多发挥的空间或更靠近关键词。
- OpenPose Full可以保留参考图的大部分姿势，但是对手部的细节控制略有不足。
- OpenPose Face会固定参考图中人物的大概姿势，但着重保留了人物的面部表情。
- OpenPose Only只会保留面部表情，如果没有关于姿势的描述词，会随机生成其他姿势。
- OpenPose会详细识别手部姿势和手指，但也可能出现遗漏的情况。
- 线稿类的XL ControlNet优先推荐xinsir系列，能够非常显著的实现控图的效果。
- XL ControlNet如果使用时发现出图效果不及预期，可以尝试降低完结步数到0.8。
- 使用FaceID时，请注意预处理器和模型的对应关系（Plus的预处理器需要对应Plus的ControlNet模型）。
- FaceID推荐搭配faceid的LoRA使用，能够有效改善脸部特征的迁移质量。
- 使用Lightning系列的Checkpoint生图时，请将采样步数降低至5~8步，CFG降至1.0~3.0，否则会很容易崩图。
- ControlNet的depth_hand_refiner整合了depth library的400多种手势特征，可用于修复人物手部缺陷，但前提是人物手部特征清晰明显并且没有严重的崩毁。
- 高清修复可用于生成2048*2048以内的图像，更高的分辨率建议使用Tiled diffusion + Tiled VAE + Control Tile的方式。
- 图生图中开启Tiled diffusion时，如果重绘幅度>0.5，务必开启Control Tile，否则一定会画出多余的元素。
- 出图尺寸 > 2048*2048或开启Tiled diffusion时，请务必开启Tiled VAE，否则会因为显存不足而导致生图失败。
- 图生图的涂鸦和涂鸦重绘需要参考语义分割的颜色对照表，如果生图结果与涂鸦无关，大概率是涂鸦的表意与所选颜色不匹配。
- 日常涂鸦更推荐使用ControlNet的Scribble/Sketch，更偏向日常的使用习惯，从而规避了图生图涂鸦对于颜色对照表的强依赖。
- DDIM和PLMS是早期SD专为扩散模型而设计的采样器。
- DPM和DPM++系列是专为扩散模型而设计的新型采样器。DPM++是DPM的改进版。
- Euler, LMS和Heun是历史悠久的稳定采样器，通常迭代20步之后图片变化就不会太大，可以稳定收敛。
- `Euler a，DPM2 a, DPM++2S a和DPM++2S a Karras适合给图片增加创造性,随着迭代步数的提升，图片也会随之变化`。
- `Euler a 比较适用于图标设计、二次元图像、小型场景等简单的图像数据生成场景。`
- UniPC可在5-10步内实现高质量图像生成，是目前最快最新的采样方法。
- DPM++ fast非常适用于steps小于20的情况，是一种快速生成高品质图像的采样器。
- DPM和DPM++系列非常适用于三维景象和复杂场景的描绘，例如写实人像。
- **Karras系列是专为扩散模型而设计的改进版采样器，依靠噪声分布表有效提升了低采样步数情况下的图片质量和生图速度。**
- DPM++ 是一种动态采样器，可以根据每一步的梯度信息自适应地调整采样步长和方向。
- Heun系列的采样器画质更细腻，但生成时间会偏慢。
- SDE 表示采样器使用了随机微分方程来模拟扩散过程，专注于提高图像的质量和生成的一致性。
- SDE采样器通常耗时会比其他采样器更久。
- 每种高级采样器都有利有弊，例如DPM++ 3M SDE Karras的优点是可以在较低的步数和CFG下生成高质量的图像，并且可以适应不同的模型和VAE，但缺点是可能会出现一些噪声和伪影。
- Exponential系列采样器利用指数映射的方法进行图像生成，旨在增强图像的清晰度和细节表现，适合对图像质量要求较高的场景。
- 不同的采样方法可能对不同的模型产生不同的影响，建议结合模型和迭代步数多做尝试。
- 过低或过高的初始分辨率都可能会让SD生图时无法正常发挥，建议参考基础模型的分辨率，配置合适的初始宽高。
- **Refiner的作用是**：使用精修模型（Refiner）对于基础模型（Base model）的输出进行细化和优化，从而生成更接近真实的图像，但对于现有的混合模型没有差别。
